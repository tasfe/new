/**
 * tiny-slider
 * @version 0.3.0
 * @author William Lin
 * @license The MIT License (MIT)
 * @github https://github.com/ganlanyuan/tiny-slider/
 **/
!function(t){window.tinySlider=t()}(function(){"use strict";function t(){for(var t,e,i,n=arguments[0]||{},a=1,s=arguments.length;s>a;a++)if(null!==(t=arguments[a]))for(e in t)i=t[e],n!==i&&void 0!==i&&(n[e]=i);return n}function e(t,e,i){t=t||window;var n=e+Math.round(99999999*Math.random());t.attachEvent?(t["e"+n]=i,t[n]=function(){t["e"+n](window.event)},t.attachEvent("on"+e,t[n])):t.addEventListener(e,i,!1)}function i(t){return t*(180/Math.PI)}function n(t,e){return Math.abs(90-Math.abs(t))>=90-e?"horizontal":Math.abs(90-Math.abs(t))<=e?"vertical":!1}function a(t){return t&&"object"==typeof t?Object.keys(t):!1}function s(t,e){if(t&&"object"==typeof t){for(var i=[],n=0;n<e.length;n++){var a=e[n];i.push(t[a])}return i}return!1}function o(){return document.documentElement.clientWidth}function r(t,e,i){var n=o();if(void 0===t.length||void 0===e||t.length!==e.length)return i;if(n<t[0])return i;if(n>=t[t.length-1])return e[e.length-1];for(var a=0;a<t.length-1;a++)if(n>=t[a]&&n<=t[a+1])return e[a]}function l(t){for(var e=document.documentElement,i=0;i<t.length;i++)if(t[i]in e.style)return t[i]}function c(t){var e;if(t.container){e=void 0===t.container.length?[t.container]:t.container;for(var i=0;i<e.length;i++){var n=t;n.container=e[i];var a=new d(n)}}}function d(i){if(i=t({container:document.querySelector(".slider"),items:1,fixedWidth:!1,maxContainerWidth:!1,slideByPage:!1,nav:!0,navText:["prev","next"],navContainer:!1,dots:!0,dotsContainer:!1,arrowKeys:!1,speed:250,autoplay:!1,autoplayTimeout:5e3,autoplayDirection:"forward",loop:!0,responsive:!1,lazyload:!1,offset:0,touch:!0},i||{}),this.container=i.container,this.children=this.container.children,this.cl=this.cul=this.children.length,this.fw=i.fixedWidth,this.nav=i.nav,this.navText=i.navText,this.navContainer=i.navContainer,this.dots=i.dots,this.dotsContainer=i.dotsContainer,this.arrowKeys=i.arrowKeys,this.speed=v?i.speed:0,this.autoplay=i.autoplay,this.autoplayTimeout=i.autoplayTimeout,this.autoplayDirection="forward"===i.autoplayDirection?1:-1,this.loop=i.loop,this.slideByPage=i.slideByPage,this.responsive=this.fw?!1:i.responsive,this.lazyload=i.lazyload,this.touch=i.touch,this.bp=a(this.responsive),this.vals=s(this.responsive,this.bp),this.itemsMax=void 0!==this.vals.length?Math.max.apply(Math,this.vals):i.items,this.items=this.fw?Math.floor(this.container.parentNode.offsetWidth/this.fw):r(this.bp,this.vals,i.items),this.fw&&i.maxContainerWidth?this.itemsMax=Math.ceil(i.maxContainerWidth/this.fw):this.fw&&(this.loop=!1),this.itemsMax=Math.min(this.cl,this.itemsMax),this.items=Math.min(this.cl,this.items),this.dotsCount=this.dotsContainer?this.cl:Math.ceil(this.cl/this.items),this.animating=!1,this.index=0,this.lazyload&&(this.offset=i.offset,this.viewport={},this.sliderRect={},this.viewport.top=0-this.offset,this.viewport.left=0-this.offset,this.inview=!1),this.touch){this.startX=0,this.startY=0,this.translateX=0,this.distX=0,this.distY=0,this.rt=0,this.panDir=!1,this.run=!1,this.animating=!1,this.slideEventAdded=!1;var n=this;!this.slideEventAdded&&this.container.addEventListener&&(this.container.addEventListener("touchstart",n.onPanStart(n),!1),this.container.addEventListener("touchmove",n.onPanMove(n),!1),this.container.addEventListener("touchend",n.onPanEnd(n),!1),this.container.addEventListener("touchcancel",n.onPanEnd(n),!1),this.slideEventAdded=!0)}this.init();var o=this,l;if(e(window,"resize",function(){clearTimeout(l),l=setTimeout(function(){o.items=o.fw?Math.floor(o.container.parentNode.offsetWidth/o.fw):r(o.bp,o.vals,i.items),o.items=Math.min(o.cl,o.items),o.dotsCount=o.dotsContainer?o.cl:Math.ceil(o.cl/o.items),o.speed=o.slideByPage?i.speed*o.items:i.speed,o.setDotCurrent(o),o.makeLayout(o),o.setSnapInterval(o),o.translate(o),o.dots&&!o.dotsContainer&&(o.displayDots(o),o.dotActive(o)),o.lazyload&&(o.saveViewport(o),o.sliderInView(o),o.lazyLoad(o))},100)}),e(window,"scroll",function(){o.lazyload&&(o.saveViewport(o),o.sliderInView(o),o.lazyLoad(o))}),this.nav&&(e(this.next,"click",function(){o.onNavClick(o,1)}),e(this.prev,"click",function(){o.onNavClick(o,-1)})),this.arrowKeys&&e(document,"keydown",function(t){t=t||window.event,37===t.keyCode?o.onNavClick(o,-1):39===t.keyCode&&o.onNavClick(o,1)}),this.dots)for(var c=0;c<this.allDots.length;c++)e(this.allDots[c],"click",this.fireDotClick(this));this.autoplay&&setInterval(function(){o.onNavClick(o,o.autoplayDirection)},o.autoplayTimeout)}Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)});var h=function(t,e){return(h=document.documentElement.classList?function(t,e){return t.classList.contains(e)}:function(t,e){if(!t||!t.className)return!1;var i=new RegExp("(^|\\s)"+e+"(\\s|$)");return t.className.match(i)})(t,e)},u=function(t,e){(u=document.documentElement.classList?function(t,e){t.classList.add(e)}:function(t,e){return t?void(h(t,e)||(t.className+=(t.className?" ":"")+e)):!1})(t,e)},f=function(t,e){(f=document.documentElement.classList?function(t,e){t.classList.remove(e)}:function(t,e){if(!t||!t.className)return!1;var i=new RegExp("(^|\\s)"+e+"(\\s|$)","g");t.className=t.className.replace(i,"$2")})(t,e)},m=function(t,e){return(m=document.documentElement.classList?function(t,e){return t.classList.toggle(e)}:function(t,e){return h(t,e)?(f(t,e),!1):(u(t,e),!0)})(t,e)};Object.keys||(Object.keys=function(t){if(t!==Object(t))throw new TypeError("Object.keys called on a non-object");var e=[],i;for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(i);return e});var v=l(["transitionDuration","WebkitTransitionDuration","MozTransitionDuration","OTransitionDuration"]),p=l(["transform","WebkitTransform","MozTransform","OTransform"]);return d.prototype={getAbsIndex:function(t){return t.index<0?t.index+t.cl:t.index>=t.cl?t.index-t.cl:t.index},setTD:function(t,e){v&&(t.container.style[v]=t.speed*e/1e3+"s",t.animating=!0)},setDotCurrent:function(t){if(t.dotCurrent=t.dotsContainer?t.getAbsIndex(t):Math.floor(t.getAbsIndex(t)/t.items),!t.loop&&!t.dotsContainer){var e=/^-?[0-9]+$/,i=e.test(t.cl/t.items);i||t.index!==t.cl-t.items||(t.dotCurrent+=1)}},init:function(){var t=this.container,i=t.parentNode,n=t.nextSibling;u(t,"tiny-content");var a=document.createElement("div"),s=a.cloneNode(!0);if(s.className="tiny-slider",s.appendChild(t),n?i.insertBefore(s,n):i.appendChild(s),navigator.msMaxTouchPoints&&(u(s,"ms-touch"),e(s,"scroll",function(){v&&(el.container.style[v]="0s"),el.container.style.transform="translate3d(-"+-el.container.scrollLeft()+"px,0,0)"})),this.dots)if(this.dotsContainer)this.allDots=this.dotsContainer.children,u(this.allDots[0],"tiny-active");else{var o=a.cloneNode(!0),r=a.cloneNode(!0);o.className="tiny-dots",r.className="tiny-dot";var l=this;!function(){for(var t=l.cl-1;t>=0;t--){var e=t>0?r.cloneNode(!0):r;o.appendChild(e)}}(),s.appendChild(o),this.allDots=o.querySelectorAll(".tiny-dot")}if(this.nav){var c;if(this.navContainer)c=this.navContainer.children,this.prev=c[0],this.next=c[1];else{c=a.cloneNode(!0);var d=a.cloneNode(!0),h=a.cloneNode(!0);c.className="tiny-nav",d.className="tiny-prev",h.className="tiny-next",2===this.navText.length&&(d.innerHTML=this.navText[0],h.innerHTML=this.navText[1]),c.appendChild(d),c.appendChild(h),s.appendChild(c),this.prev=d,this.next=h}}if(this.loop){var f=[],m=[],p=this.container.children[0],l=this;!function(){for(var t=0;t<l.itemsMax;t++){var e=l.children[t].cloneNode(!0),i=l.children[l.children.length-1-t].cloneNode(!0);f.push(e),m.push(i)}}(),function(){for(var e=0;e<f.length;e++)t.appendChild(f[e])}(),function(){for(var e=m.length-1;e>=0;e--)t.insertBefore(m[e],p)}(),this.cul=t.children.length,this.children=t.children}this.setDotCurrent(this),this.makeLayout(this),this.setSnapInterval(this),this.translate(this),this.itemActive(this),this.dots&&!this.dotsContainer&&(this.displayDots(this),this.dotActive(this)),this.lazyload&&(this.saveViewport(this),this.sliderInView(this),this.lazyLoad(this))},makeLayout:function(t){t.itemWidth=t.fw?t.fw:t.container.parentNode.offsetWidth/t.items,t.container.style.width=t.itemWidth*t.cul+"px";for(var e=0;e<t.cul;e++)t.children[e].style.width=t.itemWidth+"px";if(t.loop){var i=-(t.itemsMax*t.itemWidth);t.container.style.marginLeft=i+"px"}},setSnapInterval:function(t){navigator.msMaxTouchPoints&&(t.container.parentNode.style.msScrollSnapPointsX="snapInterval(0%, "+t.itemWidth+")")},itemActive:function(t){for(var e=t.loop?t.index+t.itemsMax:t.index,i=0;i<t.cul;i++)i===e?(u(t.children[i],"tiny-current"),u(t.children[i],"tiny-visible")):i>e&&i<e+t.items?(f(t.children[i],"tiny-current"),u(t.children[i],"tiny-visible")):(f(t.children[i],"tiny-current"),f(t.children[i],"tiny-visible"))},displayDots:function(t){for(var e=0;e<t.allDots.length;e++)e<t.dotsCount?f(t.allDots[e],"tiny-hide"):u(t.allDots[e],"tiny-hide")},dotActive:function(t){if(t.dots)for(var e=0;e<t.dotsCount;e++)e===t.dotCurrent?u(t.allDots[e],"tiny-active"):f(t.allDots[e],"tiny-active")},translate:function(t){var e=t.container.parentNode.offsetWidth,i;i=-t.itemWidth*t.index,t.fw&&!t.loop&&(i=Math.max(i,-(t.cul*t.itemWidth-e))),p?t.container.style[p]="translate3d("+i+"px, 0, 0)":t.container.style.left=i+"px"},fallback:function(t){if(t.loop){var e=t.slideByPage?t.index<-(t.itemsMax-t.items):t.index<=-t.itemsMax,i=t.slideByPage?t.index>t.cl+t.itemsMax-2*t.items-1:t.index>=t.cl+t.itemsMax-t.items;t.fw&&t.itemsMax&&!t.slideByPage&&(i=t.index>=t.cl+t.itemsMax-t.items-1),e&&(t.index+=t.cl),i&&(t.index-=t.cl),v&&(t.container.style[v]="0s"),t.translate(t)}},update:function(t){t.fallback(t),t.itemActive(t),t.dotActive(t),t.lazyLoad(t),t.animating=!1},onNavClick:function(t,e){if(!t.animating){var i,n;e=t.slideByPage?e*t.items:e,n=Math.abs(e),i=t.index+e,t.index=t.loop?i:Math.max(0,Math.min(i,t.cl-t.items)),t.setTD(t,n),t.translate(t),t.setDotCurrent(t),setTimeout(function(){t.update(t)},t.speed*n)}},fireDotClick:function(t){return function(){for(var e,i=0;i<t.allDots.length;i++)t.allDots[i]===this&&(e=i);t.onDotClick(t,e)}},onDotClick:function(t,e){if(!t.animating){var i,n;i=t.dotsContainer?e:e*t.items,i=t.loop?i:Math.min(i,t.cl-t.items),n=Math.abs(i-t.index),t.index=i,t.setTD(t,n),t.translate(t),t.dotCurrent=e,setTimeout(function(){t.update(t)},t.speed*n)}},saveViewport:function(t){t.viewport.bottom=document.documentElement.clientHeight+t.offset,t.viewport.right=document.documentElement.clientWidth+t.offset},sliderInView:function(t){var e=t.container.parentNode.getBoundingClientRect();t.sliderRect.left=e.left,t.sliderRect.right=e.right,t.sliderRect.top=e.top,t.sliderRect.bottom=e.bottom,t.inview=e.right>t.viewport.left&&e.bottom>t.viewport.top&&e.left<t.viewport.right&&e.top<t.viewport.bottom},elementInView:function(t,e){var i=t.getBoundingClientRect();return i.right>e.left&&i.bottom>e.top&&i.left<e.right&&i.top<e.bottom},lazyLoad:function(t){if(t.inview){var e=t.container.querySelectorAll(".tiny-lazy");if(e)for(var i=0;i<e.length;i++)t.elementInView(e[i],t.sliderRect)&&-1===e[i].className.indexOf("loaded")&&(e[i].src=e[i].getAttribute("data-src"),e[i].className+=" loaded")}},onPanStart:function(t){return function(e){var i=e.changedTouches[0];t.startX=parseInt(i.clientX),t.startY=parseInt(i.clientY)}},onPanMove:function(t){return function(e){var a=e.changedTouches[0];if(t.distX=parseInt(a.clientX)-t.startX,t.distY=parseInt(a.clientY)-t.startY,t.rt=i(Math.atan2(t.distY,t.distX)),t.panDir=n(t.rt,15),"horizontal"===t.panDir&&t.animating===!1&&(t.run=!0),t.run){v&&(t.container.style[v]="0s");var s=t.loop?-(t.cl+t.itemsMax-t.items)*t.itemWidth:-(t.cl-t.items)*t.itemWidth,o=t.loop?t.itemsMax*t.itemWidth:0;!t.loop&&t.fw&&(s=-(t.cl*t.itemWidth-t.container.parentNode.offsetWidth)),t.translateX=-t.index*t.itemWidth+t.distX,t.translateX=Math.max(s,Math.min(t.translateX,o)),p?t.container.style[p]="translate3d("+t.translateX+"px, 0, 0)":t.container.style.left=t.translateX+"px",e.preventDefault()}}},onPanEnd:function(t){return function(e){var i=e.changedTouches[0];if(t.distX=parseInt(i.clientX)-t.startX,t.run&&0!==t.distX){e.preventDefault(),t.run=!1,t.translateX=-t.index*t.itemWidth+t.distX;var n,a=t.loop?-t.itemsMax:0,s=t.loop?t.cl+t.itemsMax-t.items:t.cl-t.items;n=-(t.translateX/t.itemWidth),n=t.distX<0?Math.ceil(n):Math.floor(n),n=Math.max(a,Math.min(n,s)),t.index=n,t.setTD(t,1),t.translate(t),t.setDotCurrent(t),setTimeout(function(){t.update(t)},t.speed)}}}},c});